<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible"content="IE=edge,chrome=1"> <meta name="viewport"content="width=device-width,initial-scale=1"> <title> Wage Calculator - Portfolio - athanclark.com </title> <meta name="description"content="This web application is a simple wage
calculator - a tool to compare wage rates for common pay schedules. It’s
written entirely in Rust, doesn’t have a complex server, and is hosted
on a GitHub page."> <meta name="keywords"content="Finance, WebAssembly, Rust, Yew, SPA, Serverless"> <link rel="stylesheet"href="/main-c3d9d747f70.min.css"> <script>document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("page-select"),t=e.parentElement.parentElement.classList[0];for(const n of e.children)n.className===t&&n.setAttribute("selected","");e.onchange=function(e){window.location.pathname=`/${e.target.value}.html`}})</script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSM89W7SZC"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSM89W7SZC")</script> </head> <body> <main class="container"> <header> <h1>athanclark.com</h1> </header> <section class="grid"> <nav class="portfolio"> <ul> <li class="index"> <a href="/index.html">Home</a> </li> <li class="contact"> <a href="/contact.html">Contact</a> </li> <li class="portfolio"> <a href="/portfolio.html">Portfolio</a> </li> <li class="blog"> <a href="/blog.html">Blog</a> </li> </ul> <p><select id="page-select"> <option class="index"value="index">Home</option> <option class="contact"value="contact">Contact</option> <option class="portfolio"value="portfolio">Portfolio</option> <option class="blog"value="blog">Blog</option> </select></p> </nav> <article> <h1>Wage Calculator</h1> <dl> <dt> Keywords: </dt> <dd> Finance, WebAssembly, Rust, Yew, SPA, Serverless </dd> <dt> Development Date: </dt> <dd> 2023-10-04 – 2023-10-06 </dd> <dt> Website: </dt> <dd> <a href="https://wagecalculator.github.io"target="__blank">https://wagecalculator.github.io</a> </dd> </dl> <hr> <div> <h3>Summary</h3> This web application is a simple wage calculator - a tool to compare wage rates for common pay schedules. It’s written entirely in Rust, doesn’t have a complex server, and is hosted on a GitHub page. </div> <h2 id="notable-features">Notable Features</h2> <ul> <li>The user interface is written with <a href="https://yew.rs/">Yew</a> (a <a href="https://www.rust-lang.org/">Rust</a> library).</li> <li>The front-end is a WebAssembly powered rendition of the user-interface.</li> <li>The back-end renders the same user-interface to HTML, which gets <a href="https://en.wikipedia.org/wiki/Hydration_(web_development)">hydrated</a> by the front-end.</li> <li>Simple, light-weight UI styling through <a href="https://picocss.com/">Pico.css</a>.</li> </ul> <h2 id="code-snippets">Code Snippets</h2> <p>The majority of the user interface looks like the following:</p> <div class="sourceCode"id="cb1"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb1-1"><a href="#cb1-1"aria-hidden="true"tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb1-2"><a href="#cb1-2"aria-hidden="true"tabindex="-1"></a><span class="op">&lt;</span>article<span class="op">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3"aria-hidden="true"tabindex="-1"></a>    <span class="op">&lt;</span>label <span class="cf">for</span><span class="op">=</span><span class="st">&quot;biweekly-rate&quot;</span><span class="op">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4"aria-hidden="true"tabindex="-1"></a>        <span class="op">{</span> <span class="st">&quot;Bi-Weekly&quot;</span> <span class="op">}</span></span>
<span id="cb1-5"><a href="#cb1-5"aria-hidden="true"tabindex="-1"></a>        <span class="op">&lt;</span>input</span>
<span id="cb1-6"><a href="#cb1-6"aria-hidden="true"tabindex="-1"></a>            <span class="kw">type</span><span class="op">=</span><span class="st">&quot;number&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7"aria-hidden="true"tabindex="-1"></a>            class<span class="op">=</span><span class="st">&quot;currency&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8"aria-hidden="true"tabindex="-1"></a>            id<span class="op">=</span><span class="st">&quot;biweekly-rate&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9"aria-hidden="true"tabindex="-1"></a>            value<span class="op">={</span> <span class="pp">format!</span>(<span class="st">&quot;{:.2}&quot;</span><span class="op">,</span> state_value<span class="op">.</span>annual <span class="op">/</span> (WEEKS_PER_YEAR <span class="op">/</span> <span class="dv">2.0</span>)) <span class="op">}</span></span>
<span id="cb1-10"><a href="#cb1-10"aria-hidden="true"tabindex="-1"></a>            onchange<span class="op">={</span> on_change_biweekly <span class="op">}</span></span>
<span id="cb1-11"><a href="#cb1-11"aria-hidden="true"tabindex="-1"></a>        <span class="op">/&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12"aria-hidden="true"tabindex="-1"></a>    <span class="op">&lt;/</span>label<span class="op">&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13"aria-hidden="true"tabindex="-1"></a><span class="op">&lt;/</span>article<span class="op">&gt;</span></span>
<span id="cb1-14"><a href="#cb1-14"aria-hidden="true"tabindex="-1"></a><span class="co">// ...</span></span></code></pre></div> <p>Where the state is a very simple Struct:</p> <div class="sourceCode"id="cb2"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1"aria-hidden="true"tabindex="-1"></a><span class="kw">struct</span> State <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2"aria-hidden="true"tabindex="-1"></a>    annual<span class="op">:</span> <span class="dt">f64</span><span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3"aria-hidden="true"tabindex="-1"></a>    hourly<span class="op">:</span> <span class="dt">f64</span><span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4"aria-hidden="true"tabindex="-1"></a>    hours<span class="op">:</span> <span class="dt">f64</span><span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5"aria-hidden="true"tabindex="-1"></a><span class="op">}</span></span></code></pre></div> <p>Most of the code just follows that simple tactic. The build process is a bit more interesting though. It uses <a href="/portfolio/ltext.html">λtext</a> to splice the front-end code with the back-end code:</p> <div class="sourceCode"id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"aria-hidden="true"tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb3-2"><a href="#cb3-2"aria-hidden="true"tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3"aria-hidden="true"tabindex="-1"></a><span class="ex">trunk</span> build <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-4"><a href="#cb3-4"aria-hidden="true"tabindex="-1"></a>    <span class="co"># First it creates a parameter on /docs/index.html</span></span>
<span id="cb3-5"><a href="#cb3-5"aria-hidden="true"tabindex="-1"></a>    <span class="kw">{</span> <span class="bu">echo</span> <span class="st">&#39;{{ body }}&#39;</span><span class="kw">;</span> <span class="fu">cat</span> docs/index.html<span class="kw">;</span> <span class="kw">}</span> <span class="op">&gt;</span> docs/index.html.tmp <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-6"><a href="#cb3-6"aria-hidden="true"tabindex="-1"></a>    <span class="fu">mv</span> docs/index.html.tmp docs/index.html <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-7"><a href="#cb3-7"aria-hidden="true"tabindex="-1"></a>    <span class="co"># then uses the parameter just after &lt;body&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8"aria-hidden="true"tabindex="-1"></a>    <span class="fu">sed</span> <span class="at">-i</span> <span class="st">&#39;/&lt;body&gt;/a {{ body }}&#39;</span> docs/index.html <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-9"><a href="#cb3-9"aria-hidden="true"tabindex="-1"></a>    <span class="co"># generates the front-end code</span></span>
<span id="cb3-10"><a href="#cb3-10"aria-hidden="true"tabindex="-1"></a>    <span class="ex">cargo</span> run <span class="at">--features</span> hydration <span class="op">&gt;</span> docs/body.html <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-11"><a href="#cb3-11"aria-hidden="true"tabindex="-1"></a>    <span class="co"># then inserts it, replacing the parameter to docs/index.html</span></span>
<span id="cb3-12"><a href="#cb3-12"aria-hidden="true"tabindex="-1"></a>    <span class="ex">ltext</span> <span class="st">&#39;docs/index.html docs/body.html&#39;</span> <span class="at">--raw</span> docs/body.html <span class="op">&gt;</span> docs/index.html.tmp <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-13"><a href="#cb3-13"aria-hidden="true"tabindex="-1"></a>    <span class="fu">rm</span> docs/body.html <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-14"><a href="#cb3-14"aria-hidden="true"tabindex="-1"></a>    <span class="fu">mv</span> docs/index.html.tmp docs/index.html</span>
<span id="cb3-15"><a href="#cb3-15"aria-hidden="true"tabindex="-1"></a>    <span class="co"># all done</span></span></code></pre></div> <p>Though this was a very simple project and did not take me a great deal of time, it was still very interesting and I found it to be a great exercise.</p> </article> </section> <footer> Copyright &copy; Athan Clark 2023, All Rights Reserved </footer> </main> </body> </html> 